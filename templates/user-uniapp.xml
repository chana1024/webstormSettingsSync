<templateSet group="user-uniapp">
  <template name="cm-upload-su-view" value="&lt;view&gt;&#10;&#9;&#9;&lt;view&gt;&#10;&#9;&#9;&#9;&lt;sunui-upbasic :upImgConfig=&quot;upImgBasic&quot; @onUpImg=&quot;upBasicData&quot; @onImgDel=&quot;delImgInfo&quot; ref=&quot;uImage&quot;&gt;&lt;/sunui-upbasic&gt;&#10;&#9;&#9;&#9;&lt;button type=&quot;primary&quot; @tap=&quot;getUpImgInfoBasic&quot;&gt;获取上传Basic图片信息&lt;/button&gt;&#10;&#9;&#9;&#9;&lt;button type=&quot;primary&quot; @tap=&quot;uImageTap&quot;&gt;手动上传图片&lt;/button&gt;&#10;&#9;&#9;&lt;/view&gt;&#10;&lt;/view&gt;" description="组件-图片上传-su-view" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="Vue" value="true" />
    </context>
  </template>
  <template name="cm-upload-su-data" value="basicArr: [],&#10;// 基础版配置&#10;pImgBasic: {&#10;&#9;// 后端图片接口地址&#10;&#9;basicConfig: {&#10;&#9;&#9;url: 'https://p.dns06.net.cn/index.php?m=Api&amp;c=index&amp;a=upload'&#10;&#9;},&#10;&#9;// 是否开启提示(提醒上传图片的数量)&#10;&#9;// tips: false,&#10;&#9;// 是否开启notli(开启的话就是选择完直接上传，关闭的话当count满足数量时才上传)&#10;&#9;notli: false,&#10;&#9;// 图片数量&#10;&#9;count: 2,&#10;&#9;// 相机来源(相机-&gt;camera,相册-&gt;album,两者都有-&gt;all,默认all)&#10;&#9;sourceType: 'camera',&#10;&#9;// 是否压缩上传照片(仅小程序生效)&#10;&#9;sizeType: true,&#10;&#9;// 上传图片背景修改 &#10;&#9;upBgColor: '#E8A400',&#10;&#9;// 上传icon图标颜色修改(仅限于iconfont)&#10;&#9;upIconColor: '#fff',&#10;&#9;// 上传svg图标名称&#10;&#9;// upSvgIconName: 'icon-card',&#10;&#9;// 上传文字描述(仅限四个字)&#10;&#9;// upTextDesc: '上传证书',&#10;&#9;// 删除按钮位置(left,right,bleft,bright),默认右上角&#10;&#9;delBtnLocation: '',&#10;&#9;// 是否隐藏添加图片&#10;&#9;// isAddImage: false,&#10;&#9;// 是否隐藏删除图标&#10;&#9;// isDelIcon: false,&#10;&#9;// 删除图标定义背景颜色&#10;&#9;// delIconColor: '',&#10;&#9;// 删除图标字体颜色&#10;&#9;// delIconText: '',&#10;&#9;// 上传图标替换(+),是个http,https图片地址(https://www.playsort.cn/right.png)&#10;&#9;iconReplace: ''&#10;}&#10;" description="组件-图片上传-su-data" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="Vue" value="true" />
    </context>
  </template>
  <template name="cm-upload-su-method" value="// 手动上传图片(适用于表单等上传) -2019/05/10增加&#10;uImageTap() {&#10;&#9;this.$refs.uImage.uploadimage(this.upImgBasic);&#10;},&#10;// 删除图片 -2019/05/12(本地图片进行删除)&#10;async delImgInfo(e) {&#10;&#9;console.log('你删除的图片地址为:', e, this.basicArr.splice(e.index, 1));&#10;},&#10;// 基础版&#10;async upBasicData(e) {&#10;&#9;console.log('===&gt;',e);&#10;&#9;// 上传图片数组&#10;&#9;let arrImg = [];&#10;&#9;for (let i = 0, len = e.length; i &lt; len; i++) {&#10;&#9;&#9;try {&#10;&#9;&#9;&#9;if (e[i].path_server != &quot;&quot;) {&#10;&#9;&#9;&#9;&#9;await arrImg.push(e[i].path_server.split(','));&#10;&#9;&#9;&#9;}&#10;&#9;&#9;} catch (err) {&#10;&#9;&#9;&#9;console.log('上传失败...');&#10;&#9;&#9;}&#10;&#9;}&#10;&#9;// 图片信息保存到data数组&#10;&#9;this.basicArr = arrImg;&#10;&#9;// 可以根据长度来判断图片是否上传成功. 2019/4/11新增&#10;&#9;if (arrImg.length == this.upImgBasic.count) {&#10;&#9;&#9;uni.showToast({&#10;&#9;&#9;&#9;title: `上传成功`,&#10;&#9;&#9;&#9;icon: 'none'&#10;&#9;&#9;});&#10;&#9;}&#10;},&#10;// 获取上传图片basic&#10;getUpImgInfoBasic() {&#10;&#9;console.log('后端转成一维数组:', this.basicArr.join().split(','));&#10;}&#10;" description="组件-图片上传-su-method" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="Vue" value="true" />
    </context>
  </template>
</templateSet>